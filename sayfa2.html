<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Dönüm Noktaları</title>
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: #fdf6f9;
      overflow: hidden;
      font-family: 'Chakra Petch', sans-serif;
      position: relative;
      height: 100vh;
    }

    .photo {
      position: absolute;
      width: 200px;
      opacity: 0;
      transform: scale(0.8) rotate(0deg);
      transition: opacity 1s ease, transform 1s ease;
      pointer-events: none;
    }

    .photo.visible {
      opacity: 1;
      transform: scale(1) rotate(var(--angle));
    }

    #final-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 800px;
      font-size: 22px;
      color: #880e4f;
      white-space: pre-wrap;
      text-align: center;
      opacity: 0;
    }
  </style>
</head>
<body>

  <div id="final-text"></div>

  <script>
    const totalPhotos = 34;
    const positions = [];

    function getRandomPosition() {
      let x, y, tries = 0;
      do {
        x = Math.floor(Math.random() * (window.innerWidth - 220));
        y = Math.floor(Math.random() * (window.innerHeight - 240));
        let overlap = positions.some(pos => {
          return Math.abs(pos.x - x) < 220 && Math.abs(pos.y - y) < 240;
        });
        if (!overlap) break;
        tries++;
      } while (tries < 100);
      positions.push({ x, y });
      return { x, y };
    }

    function getRandomAngle() {
      const angles = ["0deg", "15deg", "-15deg", "30deg", "-30deg", "45deg", "-45deg"];
      return angles[Math.floor(Math.random() * angles.length)];
    }

    function showPhotos(index = 1) {
      if (index > totalPhotos) {
        setTimeout(showFinalText, 1500);
        return;
      }

      const img = document.createElement("img");
      img.src = `sayfa2/foto${index}.png`;
      img.className = "photo";

      const { x, y } = getRandomPosition();
      const angle = getRandomAngle();

      img.style.left = x + "px";
      img.style.top = y + "px";
      img.style.setProperty("--angle", angle);
      document.body.appendChild(img);

      setTimeout(() => {
        img.classList.add("visible");
        setTimeout(() => showPhotos(index + 1), 2000);
      }, 100);
    }

    const finalText = `Bazen sadece bir konuşma, bir mesaj, bir cümle... 
Her şeyi değiştirir.

Biz de öyleydik. 
Dönüm noktalarının tam kenarında, 
Uçurumdan döndüğümüz anlarda birbirimize tutunduk.

Ve şimdi geriye dönüp baktığımda,
Bizi ayakta tutan o mesajlar, o anılar...
Hepsi hâlâ burada.
Kalbimde, hafızamda, ve bu sayfada.`;

    function showFinalText() {
      const container = document.getElementById("final-text");
      let i = 0;
      container.style.opacity = 1;
      const interval = setInterval(() => {
        if (i < finalText.length) {
          container.textContent += finalText[i];
          i++;
        } else {
          clearInterval(interval);
        }
      }, 50);
    }

    // Sayfa yüklendiğinde başlat
    window.onload = () => {
      showPhotos();
    };
  </script>
</body>
</html>
